{% extends "base.html" %}
{% load static allauth i18n %}
{% block title %}Email Addresses â€“ FitLife Hub{% endblock %}
{% block content %}
<div class="row justify-content-center">
  <div class="col-md-6 col-lg-5">
    <div class="card shadow-sm border-0 mt-5">
      <div class="card-body p-4">
        <h2 class="mb-3 text-center">{% trans "Email Addresses" %}</h2>
        {% if emailaddresses %}
          <p class="text-muted text-center">{% trans 'The following email addresses are associated with your account:' %}</p>
          {% url 'account_email' as email_url %}
          <form method="post" action="{{ email_url }}">
            {% csrf_token %}
            <div class="list-group mb-3">
              {% for radio in emailaddress_radios %}
                {% with emailaddress=radio.emailaddress %}
                  <label class="list-group-item d-flex align-items-center">
                    <input type="radio" name="email" value="{{ emailaddress.email }}" id="{{ radio.id }}" {% if radio.checked %}checked{% endif %} class="form-check-input me-2">
                    <span>
                      {{ emailaddress.email }}
                      {% if emailaddress.verified %}
                        <span class="badge bg-success ms-2">{% translate "Verified" %}</span>
                      {% else %}
                        <span class="badge bg-warning text-dark ms-2">{% translate "Unverified" %}</span>
                      {% endif %}
                      {% if emailaddress.primary %}
                        <span class="badge bg-primary ms-2">{% translate "Primary" %}</span>
                      {% endif %}
                    </span>
                  </label>
                {% endwith %}
              {% endfor %}
            </div>
            <div class="d-grid gap-2 mb-3">
              <button type="submit" name="action_primary" class="btn btn-outline-primary">{% trans 'Make Primary' %}</button>
              <button type="submit" name="action_send" class="btn btn-outline-secondary">{% trans 'Re-send Verification' %}</button>
              <button type="submit" name="action_remove" class="btn btn-outline-danger">{% trans 'Remove' %}</button>
            </div>
          </form>
        {% else %}
          {% include "account/snippets/warn_no_email.html" %}
        {% endif %}
        {% if can_add_email %}
          <hr>
          <h4 class="mb-3">{% trans "Add Email Address" %}</h4>
          {% url 'account_email' as action_url %}
          <form method="post" action="{{ action_url }}">
            {% csrf_token %}
            <div class="mb-3">
              {{ form.email.label_tag }}
              {{ form.email }}
              {% if form.email.errors %}
                <div class="text-danger small mt-1">
                  {{ form.email.errors|striptags }}
                </div>
              {% endif %}
            </div>
            <button type="submit" name="action_add" class="btn btn-primary w-100">{% trans "Add Email" %}</button>
          </form>
        {% endif %}
      </div>
    </div>
  </div>
</div>
{% endblock %}